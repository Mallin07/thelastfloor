/* =========================================================
   HERRERÍA / FORGE
========================================================= */

/* FIX MODAL (grid + scroll) */
#overlay .modal{
  overflow: hidden;
  min-height: 0;
}

#overlay .panel{
  min-height: 0;
}

/* PANEL HERRERÍA (FORGE) — CONTENEDOR PRINCIPAL */
#panelForge.panel{
  height: 100%;
  max-height: 100%;
  overflow: hidden;

  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  min-height: 0;
}

/* Header fijo */
#panelForge > h2,
#panelForge > #forgeMeta{
  flex: 0 0 auto;
}

/* CUERPO Y LAYOUT */
#panelForge .forge-body{
  flex: 1 1 auto;
  min-height: 0;
  overflow: hidden;
}

#panelForge .forge-layout{
  display: flex;
  gap: 14px;
  height: 100%;
  min-height: 0;
  overflow: hidden;
}

/* COLUMNAS */
/* IZQUIERDA — LISTA CON SCROLL */
#panelForge .forge-list{
  flex: 0 0 420px;
  width: 420px;

  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;

  padding: 10px 6px 10px 10px;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  box-sizing: border-box;
}

/* DERECHA — DETALLE FIJO */
#panelForge .forge-detail{
  flex: 1 1 auto;
  min-width: 0;
  min-height: 0;
  overflow: hidden;

  padding: 10px;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  box-sizing: border-box;
}

/* SCROLLBAR */
#panelForge .forge-list::-webkit-scrollbar{
  width: 6px;
}

#panelForge .forge-list::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,0.25);
  border-radius: 6px;
}

/* SECCIONES DESPLEGABLES */
#panelForge .forge-sec{
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  margin-bottom: 10px;
  overflow: hidden;
}

#panelForge .forge-sec__sum{
  cursor: pointer;
  padding: 10px 12px;
  font-weight: 800;
  background: rgba(255,255,255,0.04);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

#panelForge .forge-sec__sum::-webkit-details-marker{
  display: none;
}

#panelForge .forge-sec__sum::after{
  content: "▸";
  font-weight: 900;
  opacity: 0.8;
}

#panelForge .forge-sec[open] > .forge-sec__sum::after{
  content: "▾";
}

#panelForge .forge-sec__body{
  padding: 10px 10px 2px;
}

/* Subniveles (Armadura, Cascos, etc.) */
#panelForge .forge-sec .forge-sec{
  margin-left: 10px;
  border-color: rgba(255,255,255,0.10);
}

#panelForge .forge-sec .forge-sec__sum{
  padding: 8px 10px;
  font-weight: 700;
  background: rgba(255,255,255,0.02);
}

/* FILAS DE RECETA */
#panelForge .forge-row{
  display: flex;
  align-items: center;
  gap: 10px;

  padding: 10px;
  margin-bottom: 8px;
  border-radius: 10px;
  cursor: pointer;

  border: 1px solid rgba(255,255,255,0.10);
}

#panelForge .forge-row:hover{
  filter: brightness(1.08);
}

#panelForge .forge-row.is-active{
  background: rgba(255,255,255,0.06);
}

#panelForge .forge-row.is-locked{
  opacity: 0.55;
}

#panelForge .forge-row.is-disabled{
  opacity: 0.65;
  cursor: not-allowed;
}

#panelForge .forge-sec__body .forge-row:last-child{
  margin-bottom: 0;
}

/* BOTÓN FORJAR */
#panelForge #btnForgeDo{
  background: linear-gradient(180deg, #fbbf24, #d97706);
  border: 1px solid #92400e;
  color: #111827;

  padding: 8px 12px;
  border-radius: 10px;
  font-weight: 800;
  cursor: pointer;

  transition: transform .06s ease, filter .12s ease, opacity .12s ease;
}

#panelForge #btnForgeDo:hover{
  filter: brightness(1.08);
}

#panelForge #btnForgeDo:active{
  transform: translateY(1px);
}

#panelForge #btnForgeDo:disabled{
  background: #6b7280;
  border-color: #374151;
  color: #e5e7eb;
  opacity: 0.6;
  cursor: not-allowed;
}
